{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}SplitSmart | Smart Group Expense Sharing{% endblock %}</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’°</text></svg>">
  
  <!-- Bootstrap 5.3.3 CSS & Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    integrity="sha384-tViUnnbYAV00FLIhhi3v/dWt3Jxw4gZQcNoSCxCIFNJVCx7/D55/wXsrNIRANwdD" crossorigin="anonymous">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    rel="stylesheet">
  <!-- Custom CSS -->
  <style>
    :root {
      --bs-primary: #6366F1;
      --bs-primary-dark: #4F46E5;
      --bs-primary-light: #818CF8;
      --bs-success: #10B981;
      --bs-warning: #F59E0B;
      --bs-danger: #EF4444;
      --bs-info: #3B82F6;
      --gradient-primary: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
      --gradient-secondary: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
      --border-radius: 12px;
      --border-radius-sm: 8px;
      --box-shadow: 0 4px 20px rgba(0, 0, 0, .08);
      --box-shadow-sm: 0 2px 10px rgba(0, 0, 0, .05);
      --transition: all .3s cubic-bezier(.4, 0, .2, 1);
    }

    [data-bs-theme="dark"] {
      --bs-primary: #818CF8;
      --bs-primary-dark: #6366F1;
      --bs-primary-light: #A5B4FC;
      --gradient-primary: linear-gradient(135deg, #818CF8 0%, #A78BFA 100%);
      --gradient-secondary: linear-gradient(135deg, #374151 0%, #4B5563 100%);
      --box-shadow: 0 4px 20px rgba(0, 0, 0, .3);
      --box-shadow-sm: 0 2px 10px rgba(0, 0, 0, .2);
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-weight: 400;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: var(--bs-body-bg);
      transition: var(--transition);
    }

    /* Enhanced Typography */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-weight: 600;
      line-height: 1.2;
      margin-bottom: 1rem;
    }

    .display-1,
    .display-2,
    .display-3 {
      font-weight: 700;
    }

    /* Custom Buttons */
    .btn {
      border-radius: var(--border-radius-sm);
      font-weight: 500;
      padding: 0.5rem 1.2rem;
      transition: var(--transition);
      border: none;
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: var(--gradient-primary);
      color: white;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
      background: var(--gradient-primary);
      color: white;
    }

    .btn-outline-primary {
      border: 2px solid var(--bs-primary);
      color: var(--bs-primary);
      background: transparent;
    }

    .btn-outline-primary:hover {
      background: var(--bs-primary);
      color: white;
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(99, 102, 241, 0.2);
    }

    .btn-sm {
      padding: 0.375rem 1rem;
      font-size: 0.875rem;
    }

    .btn-lg {
      padding: 0.75rem 2rem;
      font-size: 1.1rem;
    }

    /* Enhanced Cards */
    .card {
      border: none;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow-sm);
      transition: var(--transition);
      background: var(--bs-body-bg);
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: var(--box-shadow);
    }

    .card-header {
      background: var(--gradient-secondary);
      border-bottom: 1px solid var(--bs-border-color);
      padding: 1.25rem;
      font-weight: 600;
    }

    .card-body {
      padding: 1.5rem;
    }

    /* Navbar Enhancements */
    .navbar {
      background: var(--bs-body-bg) !important;
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--bs-border-color);
      box-shadow: var(--box-shadow-sm);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 1020;
    }

    .navbar-brand {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--bs-primary) !important;
      transition: var(--transition);
    }

    .navbar-brand:hover {
      transform: scale(1.05);
    }

    .navbar-nav .nav-link {
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius-sm);
      transition: var(--transition);
    }

    .navbar-nav .nav-link:hover {
      background: var(--bs-primary-bg-subtle);
      color: var(--bs-primary);
    }

    /* Theme Toggle Button */
    #themeToggle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      border: 2px solid var(--bs-border-color);
    }

    #themeToggle:hover {
      background: var(--bs-primary);
      color: white;
      border-color: var(--bs-primary);
      transform: rotate(180deg);
    }

    /* Dropdown Enhancements */
    .dropdown-menu {
      border: none;
      box-shadow: var(--box-shadow);
      border-radius: var(--border-radius);
      padding: 0.5rem 0;
      margin-top: 0.5rem;
    }

    .dropdown-item {
      padding: 0.75rem 1.5rem;
      font-weight: 500;
      transition: var(--transition);
    }

    .dropdown-item:hover {
      background: var(--bs-primary-bg-subtle);
      color: var(--bs-primary);
    }

    .dropdown-divider {
      margin: 0.5rem 0;
      opacity: 0.2;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      padding: 2rem 0;
    }

    /* Footer */
    footer {
      background: var(--gradient-secondary);
      border-top: 1px solid var(--bs-border-color);
      padding: 2rem 0;
      margin-top: auto;
    }

    footer a {
      color: var(--bs-secondary);
      text-decoration: none;
      transition: var(--transition);
    }

    footer a:hover {
      color: var(--bs-primary);
    }

    /* Utility Classes */
    .text-gradient {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .bg-gradient {
      background: var(--gradient-primary);
    }

    .shadow-custom {
      box-shadow: var(--box-shadow);
    }

    .shadow-custom-sm {
      box-shadow: var(--box-shadow-sm);
    }

    /* Form Enhancements */
    .form-control,
    .form-select {
      border-radius: var(--border-radius-sm);
      border: 2px solid var(--bs-border-color);
      transition: var(--transition);
      padding: 0.75rem 1rem;
    }

    .form-control:focus,
    .form-select:focus {
      border-color: var(--bs-primary);
      box-shadow: 0 0 0 0.2rem rgba(99, 102, 241, 0.25);
    }

    .form-label {
      font-weight: 500;
      color: var(--bs-secondary);
      margin-bottom: 0.5rem;
    }

    /* Alert Enhancements */
    .alert {
      border: none;
      border-radius: var(--border-radius);
      padding: 1rem 1.5rem;
      border-left: 4px solid;
    }

    .alert-success {
      border-left-color: var(--bs-success);
    }

    .alert-danger {
      border-left-color: var(--bs-danger);
    }

    .alert-warning {
      border-left-color: var(--bs-warning);
    }

    .alert-info {
      border-left-color: var(--bs-info);
    }

    /* Animation Classes */
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .slide-up {
      animation: slideUp 0.6s ease-out;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .navbar-brand {
        font-size: 1.25rem;
      }

      .main-content {
        padding: 1rem 0;
      }

      .card-body {
        padding: 1rem;
      }
    }

    /* Loading Spinner */
    .loading-spinner {
      width: 20px;
      height: 20px;
      border: 2px solid var(--bs-border-color);
      border-top: 2px solid var(--bs-primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
  {% block extra_css %}{% endblock %}
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="{% url 'landing_view' %}">
        <i class="bi bi-currency-exchange me-2"></i>SplitSmart
      </a>

      <button id="themeToggle" class="btn btn-outline-secondary me-3" title="Toggle dark mode"
        aria-label="Toggle theme">
        <i class="bi bi-moon-fill"></i>
      </button>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <div class="navbar-nav ms-auto d-flex align-items-center">
          {% if user.is_authenticated %}
          <a href="{% url 'index' %}" class="btn btn-outline-primary me-2">
            <i class="bi bi-grid-3x3-gap me-1"></i>Dashboard
          </a>
          <div class="dropdown">
  <button class="btn btn-outline-primary dropdown-toggle d-flex align-items-center" type="button"
          id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
    <i class="bi bi-person me-1"></i>
  </button>
  <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="userMenu">
    <li>
      <a class="dropdown-item" href="#">
        <i class="bi bi-person-circle me-2"></i>My Profile
      </a>
    </li>
    <li>
      <hr class="dropdown-divider">
    </li>
    <li>
      <a class="dropdown-item text-danger" href="{% url 'logout' %}">
        <i class="bi bi-box-arrow-right me-2"></i>Logout
      </a>
    </li>
  </ul>
</div>

          {% else %}
          <a href="{% url 'login' %}" class="btn btn-outline-primary me-2">
            <i class="bi bi-box-arrow-in-right me-1"></i>Login
          </a>
          <a href="{% url 'signup' %}" class="btn btn-primary">
            <i class="bi bi-person-plus me-1"></i>Sign Up
          </a>
          {% endif %}
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content Area -->
  <main class="main-content">
    {% if messages %}
    <div class="container">
      {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {% if message.tags == 'success' %}
        <i class="bi bi-check-circle-fill me-2"></i>
        {% elif message.tags == 'error' %}
        <i class="bi bi-exclamation-circle-fill me-2"></i>
        {% elif message.tags == 'warning' %}
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        {% elif message.tags == 'info' %}
        <i class="bi bi-info-circle-fill me-2"></i>
        {% endif %}
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    {% block content %}{% endblock %}
  </main>


  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoA6LF0sV7Sk3o2kzZRX0QV+v28CqD1R5V0sEfQdB+YIGuM"
    crossorigin="anonymous"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>
  
  <!-- Theme Toggle Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const themeToggle = document.getElementById('themeToggle');
      const html = document.documentElement;

      // Load saved theme or default to light
      const savedTheme = localStorage.getItem('theme') || 'light';
      html.setAttribute('data-bs-theme', savedTheme);
      updateThemeIcon(savedTheme);

      // Theme toggle functionality
      themeToggle.addEventListener('click', function () {
        const currentTheme = html.getAttribute('data-bs-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        html.setAttribute('data-bs-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);

        // Add smooth transition effect
        document.body.style.transition = 'all 0.3s ease';
        setTimeout(() => {
          document.body.style.transition = '';
        }, 300);
      });

      function updateThemeIcon(theme) {
        const icon = themeToggle.querySelector('i');
        icon.className = theme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-fill';
      }
    });


    // Add smooth scrolling for anchor links
    document.addEventListener('DOMContentLoaded', function () {
      const links = document.querySelectorAll('a[href^="#"]');
      links.forEach(link => {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
    });

  </script>

  <!-- Custom Scripts Block -->
  {% block scripts %}{% endblock %}
</body>

</html>